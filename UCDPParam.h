//---------------------------------------------------------------------------

#ifndef UCDPParamH
#define UCDPParamH

#include <vcl.h>

#define WM_ProgressBarStemM WM_USER

//NM = fftN;
#define NM 1024

//structura dlya zapovnennya danuh
struct Srec_buf
{
   short arr[NM];
};

//algorytm vybirky chyslovyh danyh
enum ALGO { DURCOEF=0, DURBOOL=1, TFFTM=2 };
//algorytm porivnyannya sygnaliv
enum KIND { DIMHEMIN = 0, SCALAR=1, DIMEUCLID=2, OTHERDISP, CROSS };

class TCDPParam
{
   public:

   bool TokenSens;  // chutlyvist` do skladiv
   String CDPUserPath; //  shlyah do robochoyi papky
   String dbCDPext; // rozhsyrennya fayla z etalonamy
   String RegisterPath; // shlyah do robochoyi papky(zberigayetsya v reyestri)
   int max_vec_size; //max dovgyna skazanogo slova
   // min = 3 (3*1024)
   int mnognyk;
   int min_energy; //min-dopystyme znachennya energiyi slova
   int segm_length; //dovgyna segmentu-perevirky energiyi

   int MAX_AMPL; //max znachennya dyskrety
   int MAX_VECTOR_SIZE; //max dovgyna skazanogo slova (kontrol`na perevirka)

   int minfreq; // max chastota (dlya vizualizaciyi)
   int maxfreq; // min chastota (dlya vizualizaciyi)
   int fftN;  // rozmir vhidnogo masyvu fft
   int MSampleRate; //chastota dyskretyzaciyi
   int LogFrameSize; // osnova algotytmu fft: N = 2^LogFrameSize 

   int max_realization_U; // maksymal`na kilkist` realizaciy odnogo slova
   int min_realization_U; // minimal`na kilkist` realizaciy odnogo slova
   int curr_realization_U; //potochna kilkist` realizaciy odnogo slova
   int wait_for_threads; // chas ochicuvannya potokiv (ms)
   int m_;  //Ceil( Tmin_ / (2*dt_) );
   int M_; // M - Kilkist` vidlikiv u vybirci: dT/Fs
   int err_; //dopustyma pohubka y vidsotkah: %
   int max_err_; //max pohubka y vidsotkah: %
   int min_err_; //min pohubka y vidsotkah: %
   //volatile short qk__ = 9; // stvoryty masuv fon transkrypciy dlya kognogo slova ???
   bool less1_; //chu znachenna < 1 ?
   int MAX_ITER_; //maksymal`na kilkist` iteraciy CDP

   ALGO alg_; // algorytm poperednyoyi obrobky danyh
   KIND kind_; // algorytm porivnyanya dvoh elementiv sygnalu

   bool isFirstTime;  // chy pershyu raz v programi
   int msTimeToEndRec; // chas zakinchennya zapysu

   TCDPParam();
   //~TCDPParam(){}
};
extern TCDPParam cdpparam;

//-----------------------------------------------------------------------------
//-----------------------------------------------------------------------------

const String Word_NumTok[] = { "1", "12", "1", "1", "23", "1", "1", "12", "23", "2",
  "23", "34", "23", "23", "234", "234", "12", "234", "1", "23" };   // Kilkosti skladiv kognogo slova sliv +- 1 sklad

const int ogyn_cnt = 50; // kilkist` elementiv dlya predstavlennya ogynayuchoyi
const int wrd_length = 20;
//slova dlya rozpiznavannya (vidobragayut`sya v tree view)
const String Word_lib_ua[] = { "'0' - нуль", "'1' - один", "'2' - два",
   "'3' - три", "'4' - чотири", "'5' - п'ять", "'6' - шість", "'7' - сім",
   "'8' - вісім", "'9' - дев'ять", "'=' - результат", "'x' - завершити",
   "'+' - додати", "'-' - відняти", "'*' - помножити", "'/' - поділити",
   "'+/-' - мінус", "'<-' - скасувати", "',' - кома", "'C' - витерти" };

const String Word_lib_eng[] = { "nol'", "odin", "dva", "tri", "chotyry", "pyat'",
   "shist", "sim", "vee sim", "devyat'",  "rezoo ltat", "za vershyty", "dodaty", "vid nua ty", "pomnogyty", "podil ity",
   "meen us", "skasoo waty", "koma", "vyterthy" };   

const int TemporalTranskr [wrd_length] = { 9, 9, 7, 7, 14, 14, 14, 7, 12, 15, 17, 21, 13, 15, 21, 17, 12, 19, 9, 15 };

const double wrd_array[wrd_length][ogyn_cnt+5] =
{
{6.18694e-05,61.5375,45.5651,40.5471,44.7269,324.921,982.613,1097.35,1295.53,1875.17,8457.04,7796.73,7990.56,7834.04,7780.4,7780.13,7781.58,7840.67,7714.61,7805.42,7791.62,7763.02,7592.39,7666.95,7688.23,7675.85,7579.97,7626.02,7708.16,7432.96,7203.32,7160.64,7169.64,7389.89,7441.41,7554.8,7767.11,8506.3,8541.39,8045.39,5975.95,3738.48,3131.81,4057.52,4382.8,3404.45,1651.14,587.046,181.795,51.8511,82.8714},
{0.000213731,559.791,3429.94,5229.86,5582.56,5595.88,5474.81,5440.35,5365.23,5490.44,5570.64,5497.44,5473.9,5778.05,6141.52,6123.76,5992.81,5818.71,5603.71,5562.14,5495.81,5505.46,5682.11,5086.44,573.168,356.965,382.005,386.193,5127.59,6954.59,6983.77,6710.46,6418.56,6211.91,6402.94,6331.69,6318.93,6236.82,5986.22,6076.89,6148.29,6138.9,6430.23,6516.94,6248.5,5806.62,5618.64,4594.03,647.299,615.724,569.161},
{6.18694e-05,16.6196,20.3716,24.7525,257.605,373.175,456.828,528.057,2061.61,2122.37,1734.94,1819.67,2620.06,4483.26,6435.32,6699.09,6404.5,6319.95,6515.23,6554.65,6731.18,6647.54,6727.39,6665.86,6523.26,6433.79,6300.43,6173.25,6190.5,6183.84,6062.58,5855.58,5931.3,5879.94,5929.99,5958.15,6003.81,5858.8,6004.04,5927.78,5846.85,5494.6,5466.11,5319.15,5152.47,5071.46,4852.4,3776.93,1605.06,567.81,180.552},
{9.28041e-05,15.8474,29.5909,20.7618,35.17,27.6557,28.7273,18.9999,14.2781,24.1481,36.9476,4229.6,6632.3,2191.8,1582.05,1686.56,3418.75,5735.08,4685.03,6061.78,6363.04,6260.69,5807.33,5879.48,6007.8,5976.7,6111.93,6381.68,6306.85,6167.17,5900.51,5971.71,6281.51,6527.65,6598.56,6417.28,6316.97,6052.47,6090.02,6064.08,6340.95,6349.48,5989.54,6223.84,6127.89,6108.75,5648.53,4350.85,1337.44,176.23,70.5778},
{0,32.1779,64.8958,20.3408,110.863,1272.61,8020.47,6962.76,7003.25,7145.22,7139.75,6994.55,6991.94,6852.31,6968.42,6476.57,6334.54,6103.07,6502.24,1050.21,23.937,44.3267,6466.24,7050.6,7483.75,6635.14,6917.85,6997.69,6831.92,7258.68,6964.76,6600.67,6917.04,7184.78,6530.06,2177.07,4651.84,2627.34,6663.61,6253.1,6167.98,6193.68,6755,6594.03,6386.12,6206.31,5656.85,5332.39,2487.02,59.7099,60.6134},
{0.000171547,34.3221,23.2435,13.4714,18.4187,14.9405,21.9464,355.844,301.678,175.151,2295.72,4094.52,5681.76,6836.64,6425.72,6020.39,6059.45,5754.39,5756.93,5585.09,5664.14,5774.74,5814.25,6119.53,5652.42,5656.19,5528.3,5630.85,5515.38,5612.82,5542.51,5401.31,5529.34,5193.62,5483.74,5960.11,5718.73,5674.17,5520.81,5403.76,5596.03,5453.4,5819.06,6568.54,942.625,54.2391,57.1376,37.0337,450.167,342.313,229.495},
{0.000272788,869.729,939.083,1255.2,1291.04,1463.76,1303.16,1598.54,1204.47,954.322,485.568,3802.72,9462.75,9406.79,9298.96,8986.57,8937.43,8857.12,8933.63,8733.99,8430.71,8447.19,8302.54,8069.68,8044,8070.18,7982.03,7968.02,7950.6,8045.16,7667.34,7692.76,7803.98,7774.25,7431.87,7407.51,7452.84,7545.25,7418.95,7527.32,7351.05,7396.23,7389.63,7694.63,7999.2,7594.01,3643.98,695.933,549.314,463.04,433.072},
{0.00072556,227.905,195.672,253.114,257.807,327.197,504.779,674.668,6254.23,9423.43,8475.1,8291.21,8040.44,7624.88,7742.75,7939.36,7690.1,7683.22,8140.19,7937.48,7961.57,7598.58,7521.63,7496.63,7449.07,7392.94,7617.09,7643.87,7550.69,7605.41,7746.41,7686.64,7948.57,7582.86,7363.3,7285.74,7231.95,7120.44,6926.42,6951.44,6894.15,6407.99,6285.32,4751.57,719.894,638.85,671.598,679.815,682.046,583.41,512.48},
{0.00165923,722.549,436.433,273.474,212.003,3191.8,8798.78,7880.82,7776.82,7346.25,7120.11,7393.35,7290.12,7570.47,7349.25,7321.27,7527.15,7344.86,7398.71,7557.67,7234.38,7277.03,7489.68,7093.28,7327.74,7915.84,4369.21,442.361,295.489,298.045,227.291,242.469,294.905,403.513,594.847,1017.37,2300.39,8517,7368.64,7080.45,7004,6970.24,7161.34,6792.32,6750.08,6453.84,6715.67,5589.08,812.901,762.444,707.245},
{0.000182796,422.029,520.852,498.599,352.923,6060.57,6579.34,6324.81,6488.49,6298.88,6277.05,6149.89,6654.81,6711.01,6730.16,6629.04,6524.09,6595.14,6489.57,6748.18,6733.27,6547.83,6499.93,6870.41,6905.86,6451.93,3217.54,1249.64,2149.34,7115,7407.46,7337.79,7885.48,7075.39,6863.3,6254.86,6206.56,6121.97,5986.74,5887.37,5789.65,6276.01,6487.87,6944.83,8632.16,251.31,35.2558,29.1465,896.319,918.091,761.383},
{3.09347e-05,25.873,23.4216,3933.33,1172.63,1815.93,6805.91,7604.44,6027.3,6231.85,5974.92,6060.07,6064.36,6300.69,6320.22,6304.81,6311.18,6557.72,6941.64,4600.68,1483.63,764.905,1378.1,1885.73,8514.25,6733.21,6544.19,6475.56,6460.53,6624.45,6775.83,6903.92,7724.75,7766.09,7137.34,2163.11,57.9691,18.9362,17.4958,5392.79,6747.8,6436.86,6265.53,6123.13,5907.98,5921.5,5764.6,6132.78,8.47605,25.9668,961.268},
{0.00116989,1343.36,691.43,814.141,4452.84,6033,5775.33,5341.12,5341.28,5467.44,5327.33,5681.93,3874.11,777.426,1699.53,6519.91,5447.81,5441.37,5566.55,5573.86,5490.14,5577.75,5854.94,3409.58,1458.92,2827.25,1206.75,1178.9,1296.48,1507.2,1452.53,7109.54,7887.44,7156.28,5848.05,192.46,65.2062,257.04,7580.47,7018.19,6792.62,6589.68,6937.07,6642.8,7741.69,6552.33,2598.18,155.431,59.7222,77.324,43.4706},
{0.000179984,16.4214,416.809,541.801,4324.42,7191.02,6809.35,6142.26,6305.24,6326.36,5923.13,6036.39,6183.27,6262.43,6232.28,6158.03,6276.24,3179.12,602.834,424.328,768.542,6489.9,5823.1,5647.16,5495.04,5922.12,6095.33,5523.31,5559.16,5269.16,5047.3,5559.07,6035.08,207.63,29.4329,26.6568,997.925,7345.61,6782.85,6544.76,6823.79,6698.19,6735.04,6694.17,6965.58,7242.31,5146.98,1163.88,88.6498,79.485,63.5853},
{0.01074,1477.6,2194.74,5617.06,8307.23,7537.61,7290.32,7642.34,7506.49,7315.7,7079.99,6962.2,7058.5,7089.73,6913.21,6968.73,518.527,327.473,586.128,1904.71,719.042,3085.02,6320.7,6723.83,5833.19,5597.17,5626.72,5668.41,5510.1,5224.35,5238.43,5440.77,5453.85,5533.54,4168.1,38.1029,17.9295,357.482,7235.39,6541.15,6780.85,7129.26,6687.84,6504.91,6333.93,6404.88,7505.19,5079.5,868.255,69.924,57.9153},
{5.90572e-05,18.6447,912.486,5562.3,5557.91,5748.21,5771.66,6216.01,6080.84,6119.75,6491.12,6395.89,6156.34,5932.13,4194.78,522.297,705.4,1665.63,696.625,737.534,7367.31,6452.26,5942.51,6340.31,6405.33,6333.31,6181.32,6179.02,6419.29,6825.3,2281.56,1045.85,3529.9,6661.19,6793.16,6588.72,6780.08,6608.28,66.9672,23.5302,24.0216,7639.3,6876.03,6900.08,6712.61,6642.49,6776.04,7926.43,4851.29,89.0605,92.4375},
{0.000115302,119.313,36.4091,46.3309,58.8548,44.1037,2667.49,6299.21,5777.33,5979.63,6136.45,6186.89,6185.35,6357.74,6459.87,6205.68,6234.56,7282.63,501.811,289.648,872.013,5531.79,8445.01,7695.22,7251.44,7051.21,6782.63,6222.36,6358.48,5759.74,6932.79,7050.63,6843.22,6565.12,6505.88,6567.37,6786.94,6769.56,65.9213,20.3274,356.529,6890.93,6445.83,6594.53,6703.59,6791.28,7808.11,5012.8,87.1395,50.9239,19.7331},
{0.00187296,549.734,563.112,636.89,1861.94,4741.47,5772.12,6498.25,7099.76,7481.28,7328.22,7616.97,7931.63,7119.73,7359.81,7166.96,7248.93,7166.04,6924.82,7104.04,6748.11,7096.98,6957.76,7100.09,7113.35,6993.52,650.839,891.5,907.423,1180.99,7560.71,7018.13,6836.62,6623.17,6634.85,6617.01,6494.12,6445.44,6503.68,6875.08,6499.43,6651.68,6602.96,7414.66,7983.81,5695.78,1458.36,529.887,324.59,277.678,316.115},
{0.000793053,434.443,46.4624,616.024,6634.29,6069.81,5955.76,5977.08,5783.61,5933.93,6014.91,6221.4,7147.02,2108.17,260.489,335.232,398.373,354.237,8169.08,6530.03,6675.27,6569.27,6346.16,6314.92,6171.78,6259.55,6135.38,6083.49,2809.31,5298,5759.02,5750.51,5721.68,5653.34,5506.99,5156.68,5353.64,1166.36,26.3202,21.0862,7492.73,7097.24,7191.17,7074.71,6925.48,6877.93,7706.8,2555.53,62.7059,27.9465},
{7.03062e-05,970.436,759.707,252.845,5626.98,7487.54,7172.39,6858.49,6701.09,6795.92,6818.7,6587.39,6524.97,6398.4,6487.5,6312.92,6061.71,6082.77,5888.78,5765.86,5583.24,5592.3,4446.92,1315.1,960.584,952.978,953.646,962.092,1027.34,2848.3,4937.73,4648.08,4474.04,4322.53,4135.49,4129.66,4135.36,4064.02,4010.09,3814.26,3838.25,3711.28,3510.09,3042.76,1908.94,829.941,225.856,69.5296,137.729,109.561,65.1309},
{0.00695187,3056.99,5246.49,6254.5,6115.09,6447.13,6608.22,6469.15,6419.98,6341.03,6215.46,6201.8,1805.75,255.928,72.4898,14.7103,13.896,26.3884,56.1896,875.749,4950.7,5850.81,5720.06,5744.19,5031.77,512.266,2580.1,2191.19,2187.25,624.123,29.2442,8.29476,17.8798,18.1444,167.154,1486.99,6057.08,6288.56,5420.12,5008.24,4655.03,4358.82,4127.56,3636.88,2933.53,1758.38,853.988,244.72,231.361,132.949,94.8026}
};

#endif
